<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Welcome to mockextras’s documentation! &mdash; mockextras 0.0.2 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="mockextras 0.0.2 documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">mockextras 0.0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="welcome-to-mockextras-s-documentation">
<h1>Welcome to mockextras&#8217;s documentation!<a class="headerlink" href="#welcome-to-mockextras-s-documentation" title="Permalink to this headline">¶</a></h1>
<p>The mockextras library is designed to be used with the mock library by Michael Foord
(<a class="reference external" href="http://www.voidspace.org.uk/python/mock/">http://www.voidspace.org.uk/python/mock/</a>). The mockextras library adds a number of features that
are found in other mocking libraries namely:</p>
<ul class="simple">
<li>a fluent API for the configuration of stubs</li>
<li>stubs</li>
<li>matchers</li>
</ul>
</div>
<div class="section" id="module-mockextras._fluent">
<span id="docstrings"></span><h1>DocStrings<a class="headerlink" href="#module-mockextras._fluent" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="mockextras._fluent.when">
<tt class="descclassname">mockextras._fluent.</tt><tt class="descname">when</tt><big>(</big><em>mock_fn</em><big>)</big><a class="headerlink" href="#mockextras._fluent.when" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a fluent API for specifying stubs.</p>
<p>For example, you can specify different values to return or exceptions to raise based on the arguments
passed into the called_with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mock</span> <span class="kn">import</span> <span class="n">Mock</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">when</span><span class="p">(</span><span class="n">mock</span><span class="p">)</span><span class="o">.</span><span class="n">called_with</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="s">&quot;world&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">when</span><span class="p">(</span><span class="n">mock</span><span class="p">)</span><span class="o">.</span><span class="n">called_with</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">when</span><span class="p">(</span><span class="n">mock</span><span class="p">)</span><span class="o">.</span><span class="n">called_with</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Boom!&quot;</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span>
<span class="go">&#39;world&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="go">&#39;bar&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">Boom!</span>
</pre></div>
</div>
<p>You can use &#8216;then&#8217; multiple times to specify a sequence of results.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">when</span><span class="p">(</span><span class="n">mock</span><span class="p">)</span><span class="o">.</span><span class="n">called_with</span><span class="p">(</span><span class="s">&quot;monkey&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="s">&quot;weezel&quot;</span><span class="p">)</span>\
<span class="gp">... </span>                                <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="s">&quot;badger&quot;</span><span class="p">)</span>\
<span class="gp">... </span>                                <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Boom!&quot;</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;monkey&quot;</span><span class="p">)</span>
<span class="go">&#39;weezel&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;monkey&quot;</span><span class="p">)</span>
<span class="go">&#39;badger&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;monkey&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">Boom!</span>
</pre></div>
</div>
<p>The last value is repeated for any subsequent calls.</p>
<p>You can use matchers, such as Any(), as wild-card arguments when matching call arguments. The stub&#8217;s
configuration is searched in the order it was specified so you can put more specific call argument
specifications ahead of more general ones. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mockextras</span> <span class="kn">import</span> <span class="n">Any</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">when</span><span class="p">(</span><span class="n">mock</span><span class="p">)</span><span class="o">.</span><span class="n">called_with</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="s">&quot;monkey&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">when</span><span class="p">(</span><span class="n">mock</span><span class="p">)</span><span class="o">.</span><span class="n">called_with</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">Any</span><span class="p">())</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="go">&#39;monkey&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
<span class="go">&#39;hello&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s">&quot;monkey&quot;</span><span class="p">)</span>
<span class="go">&#39;hello&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="p">{</span> <span class="s">&quot;key&quot;</span> <span class="p">:</span> <span class="mi">1000</span> <span class="p">})</span>
<span class="go">&#39;hello&#39;</span>
</pre></div>
</div>
<dl class="docutils">
<dt>The following matchers are available in mockextras:</dt>
<dd><ul class="first last simple">
<li>Any</li>
<li>Contains</li>
<li>AnyOf</li>
</ul>
</dd>
</dl>
<p>See their documentation for more info.</p>
</dd></dl>

<span class="target" id="module-mockextras._stub"></span><dl class="function">
<dt id="mockextras._stub.seq">
<tt class="descclassname">mockextras._stub.</tt><tt class="descname">seq</tt><big>(</big><em>iterable</em><big>)</big><a class="headerlink" href="#mockextras._stub.seq" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to define a sequence of return values for a stub based on an iterable, such as a container:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mock</span> <span class="kn">import</span> <span class="n">Mock</span><span class="p">,</span> <span class="n">call</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span> <span class="o">=</span> <span class="n">stub</span><span class="p">((</span><span class="n">call</span><span class="p">(),</span> <span class="n">seq</span><span class="p">(</span><span class="n">l</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">()</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">()</span>
<span class="go">3</span>
</pre></div>
</div>
<p>or a generator:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span> <span class="o">=</span> <span class="n">stub</span><span class="p">((</span><span class="n">call</span><span class="p">(),</span> <span class="n">seq</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">()</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">()</span>
<span class="go">3</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mockextras._stub.stub">
<tt class="descclassname">mockextras._stub.</tt><tt class="descname">stub</tt><big>(</big><em>*args</em><big>)</big><a class="headerlink" href="#mockextras._stub.stub" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes stubs that can be used stand-alone or with mock.</p>
<p>Stubs are dumb functions, using in testing, they do no processing but they can take arguments and return 
predefined results.</p>
<p>A stub is configured so it returns different values depending on the arguments passed to it. You configure
it with one or more pairs of call arguments and results then when the stub is called with a given set of call
arguments the corresponding result is returned. If the result is an Exception the result is raised. If more
than one result is specified the results will be returned/raised one at a time over successive calls to the
stub. If you wish to specify successive results using an iterable you must wrap it with seq().</p>
<p>You can use a stub in place of a function, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mock</span> <span class="kn">import</span> <span class="n">call</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span> <span class="o">=</span> <span class="n">stub</span><span class="p">((</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">),</span> <span class="s">&quot;world&quot;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">),</span>   <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">),</span>   <span class="n">seq</span><span class="p">(</span><span class="nb">xrange</span><span class="p">(</span><span class="mi">100</span><span class="p">))),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;baz&quot;</span><span class="p">),</span>   <span class="ne">KeyError</span><span class="p">(</span><span class="s">&#39;baz&#39;</span><span class="p">)),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;boom&quot;</span><span class="p">),</span>  <span class="mi">100</span><span class="p">,</span> <span class="ne">RuntimeError</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;boom&quot;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span>
<span class="go">&#39;world&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Or you can combine it with a mock by setting it as the side_effect. This has the advantage that you can later
verify the function was called as expected.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mock</span> <span class="kn">import</span> <span class="n">Mock</span><span class="p">,</span> <span class="n">call</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="n">stub</span><span class="p">((</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">),</span> <span class="s">&quot;world&quot;</span><span class="p">),</span>
<span class="gp">... </span>                        <span class="p">(</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">),</span>   <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span>
<span class="go">&#39;world&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">mock</span><span class="o">.</span><span class="n">call_args_list</span> <span class="o">==</span> <span class="p">[</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">),</span> <span class="n">call</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">),</span> <span class="n">call</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">),</span> <span class="n">call</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)]</span>
</pre></div>
</div>
<p>Also you can use stubs as methods on Mock objects. Whether you use them directly as the methods or as the
side_effect of a mock method depends on whether you want to verify the method calls.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mock_obj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">(</span><span class="n">my_first_method</span><span class="o">=</span><span class="n">stub</span><span class="p">((</span><span class="n">call</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="mi">100</span><span class="p">),</span> <span class="p">(</span><span class="n">call</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="mi">200</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock_obj</span><span class="o">.</span><span class="n">my_second_method</span> <span class="o">=</span> <span class="n">stub</span><span class="p">((</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">),</span> <span class="s">&quot;aa&quot;</span><span class="p">),</span> <span class="p">(</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;b&quot;</span><span class="p">),</span> <span class="s">&quot;bb&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock_obj</span><span class="o">.</span><span class="n">my_third_method</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="n">stub</span><span class="p">((</span><span class="n">call</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="mi">456</span><span class="p">),</span> <span class="p">(</span><span class="n">call</span><span class="p">(</span><span class="mi">789</span><span class="p">),</span> <span class="mi">54321</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mock_obj</span><span class="o">.</span><span class="n">my_first_method</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="go">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock_obj</span><span class="o">.</span><span class="n">my_second_method</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">)</span>
<span class="go">&#39;bb&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock_obj</span><span class="o">.</span><span class="n">my_third_method</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="go">456</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">mock_obj</span><span class="o">.</span><span class="n">mock_calls</span> <span class="o">==</span> <span class="p">[</span><span class="n">call</span><span class="o">.</span><span class="n">my_third_method</span><span class="p">(</span><span class="mi">123</span><span class="p">)]</span> <span class="c"># only the mocked call is recorded</span>
</pre></div>
</div>
<p>You can use matchers, such as Any(), as wild-card arguments when matching call arguments. The stub&#8217;s
configuration is searched in the order if was specified so you can put more specific call argument
specifications ahead of more general ones.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mockextras</span> <span class="kn">import</span> <span class="n">Any</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span> <span class="o">=</span> <span class="n">stub</span><span class="p">((</span><span class="n">call</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span>   <span class="s">&quot;monkey&quot;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="n">call</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">Any</span><span class="p">()),</span> <span class="s">&quot;hello&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="go">&#39;monkey&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
<span class="go">&#39;hello&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s">&quot;monkey&quot;</span><span class="p">)</span>
<span class="go">&#39;hello&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="p">{</span> <span class="s">&quot;key&quot;</span> <span class="p">:</span> <span class="mi">1000</span> <span class="p">})</span>
<span class="go">&#39;hello&#39;</span>
</pre></div>
</div>
<dl class="docutils">
<dt>The following matchers are available in mockextras:</dt>
<dd><ul class="first last simple">
<li>Any</li>
<li>Contains</li>
<li>AnyOf</li>
</ul>
</dd>
</dl>
<p>See their documentation for more info.</p>
</dd></dl>

<span class="target" id="module-mockextras._matchers"></span><dl class="class">
<dt id="mockextras._matchers.Any">
<em class="property">class </em><tt class="descclassname">mockextras._matchers.</tt><tt class="descname">Any</tt><big>(</big><em>cls=&lt;type 'object'&gt;</em><big>)</big><a class="headerlink" href="#mockextras._matchers.Any" title="Permalink to this definition">¶</a></dt>
<dd><p>Matchers act as wildcards when defining a stub or when asserting call arguments.</p>
<p>The Any matcher will match any object.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">whatever</span> <span class="o">=</span> <span class="n">Any</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">whatever</span> <span class="o">==</span> <span class="s">&#39;hello&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">whatever</span> <span class="o">==</span>  <span class="mi">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">whatever</span> <span class="o">==</span>  <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>You can optionally specify a type so that Any only matches objects of that type.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">anystring</span> <span class="o">=</span> <span class="n">Any</span><span class="p">(</span><span class="nb">basestring</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">anystring</span> <span class="o">==</span> <span class="s">&#39;hello&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">anystring</span> <span class="o">==</span> <span class="s">&#39;monkey&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">anystring</span> <span class="o">==</span> <span class="s">u&#39;bonjour&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">anystring</span> <span class="o">!=</span> <span class="p">[</span><span class="s">&#39;hello&#39;</span><span class="p">,</span> <span class="s">&#39;world&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Any can be used when specifying stubs:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mock</span> <span class="kn">import</span> <span class="n">Mock</span><span class="p">,</span> <span class="n">call</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mockextras</span> <span class="kn">import</span> <span class="n">stub</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="n">stub</span><span class="p">((</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">,</span> <span class="s">&quot;world&quot;</span><span class="p">),</span> <span class="mi">100</span><span class="p">),</span>
<span class="gp">... </span>                        <span class="p">(</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="n">Any</span><span class="p">()),</span> <span class="mi">200</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="s">&quot;world&quot;</span><span class="p">)</span>
<span class="go">200</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="s">&quot;Fred&quot;</span><span class="p">)</span>
<span class="go">200</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
<span class="go">200</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="s">&#39;a&#39;</span> <span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s">&#39;b&#39;</span> <span class="p">:</span> <span class="mi">2000</span><span class="p">})</span>
<span class="go">200</span>
</pre></div>
</div>
<p>or when asserting call arguments:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mock</span> <span class="kn">import</span> <span class="n">Mock</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="s">&quot;world&quot;</span><span class="p">)</span>
<span class="go">&lt;Mock name=&#39;mock()&#39; id=&#39;...&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="n">Any</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="s">&quot;Fred&quot;</span><span class="p">)</span>
<span class="go">&lt;Mock name=&#39;mock()&#39; id=&#39;...&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">mock</span><span class="o">.</span><span class="n">call_args_list</span> <span class="o">==</span> <span class="p">[</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="s">&quot;world&quot;</span><span class="p">),</span>
<span class="gp">... </span>                               <span class="n">call</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="n">Any</span><span class="p">())]</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="mockextras._matchers.Contains">
<em class="property">class </em><tt class="descclassname">mockextras._matchers.</tt><tt class="descname">Contains</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#mockextras._matchers.Contains" title="Permalink to this definition">¶</a></dt>
<dd><p>Matchers act as wildcards when defining a stub or when asserting call arguments.</p>
<p>The Contains matcher will match objects that contain the given value or substring.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">contains_five</span> <span class="o">=</span> <span class="n">Contains</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">contains_five</span> <span class="o">==</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">contains_five</span> <span class="o">!=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">contains_ello</span> <span class="o">=</span> <span class="n">Contains</span><span class="p">(</span><span class="s">&#39;ello&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">contains_ello</span> <span class="o">==</span> <span class="s">&quot;hello&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">contains_ello</span> <span class="o">!=</span> <span class="s">&quot;bye bye&quot;</span>
</pre></div>
</div>
<p>Contains can be used when specifying stubs:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mock</span> <span class="kn">import</span> <span class="n">Mock</span><span class="p">,</span> <span class="n">call</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mockextras</span> <span class="kn">import</span> <span class="n">stub</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="n">stub</span><span class="p">((</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">,</span> <span class="s">&quot;world&quot;</span><span class="p">),</span> <span class="mi">100</span><span class="p">),</span>
<span class="gp">... </span>                        <span class="p">(</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="n">Contains</span><span class="p">(</span><span class="s">&#39;monkey&#39;</span><span class="p">)),</span> <span class="mi">200</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="s">&quot;uncle monkey&quot;</span><span class="p">)</span>
<span class="go">200</span>
</pre></div>
</div>
<p>or when asserting call arguments:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mock</span> <span class="kn">import</span> <span class="n">Mock</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="s">&quot;world&quot;</span><span class="p">)</span>
<span class="go">&lt;Mock name=&#39;mock()&#39; id=&#39;...&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="n">Contains</span><span class="p">(</span><span class="s">&#39;or&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="s">&quot;Fred&quot;</span><span class="p">)</span>
<span class="go">&lt;Mock name=&#39;mock()&#39; id=&#39;...&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">mock</span><span class="o">.</span><span class="n">call_args_list</span> <span class="o">==</span> <span class="p">[</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="s">&quot;world&quot;</span><span class="p">),</span>
<span class="gp">... </span>                               <span class="n">call</span><span class="p">(</span><span class="s">&quot;bye bye&quot;</span><span class="p">,</span> <span class="n">Contains</span><span class="p">(</span><span class="s">&#39;red&#39;</span><span class="p">))]</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="mockextras._matchers.AnyOf">
<em class="property">class </em><tt class="descclassname">mockextras._matchers.</tt><tt class="descname">AnyOf</tt><big>(</big><em>*args</em><big>)</big><a class="headerlink" href="#mockextras._matchers.AnyOf" title="Permalink to this definition">¶</a></dt>
<dd><p>Matchers act as wildcards when defining a stub or when asserting call arguments.</p>
<p>The AnyOf matcher will ....</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">is_a_small_prime</span> <span class="o">=</span> <span class="n">AnyOf</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">13</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">is_a_small_prime</span> <span class="o">==</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">is_a_small_prime</span> <span class="o">!=</span> <span class="mi">4</span>
</pre></div>
</div>
<p>AnyOf can be used when specifying stubs:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mock</span> <span class="kn">import</span> <span class="n">Mock</span><span class="p">,</span> <span class="n">call</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mockextras</span> <span class="kn">import</span> <span class="n">stub</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="n">stub</span><span class="p">((</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">),</span> <span class="mi">100</span><span class="p">),</span>
<span class="gp">... </span>                        <span class="p">(</span><span class="n">call</span><span class="p">(</span><span class="n">AnyOf</span><span class="p">(</span><span class="s">&#39;monkey&#39;</span><span class="p">,</span> <span class="s">&#39;donkey&#39;</span><span class="p">,</span> <span class="s">&#39;badger&#39;</span><span class="p">)),</span> <span class="mi">200</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;monkey&quot;</span><span class="p">)</span>
<span class="go">200</span>
</pre></div>
</div>
<p>or when asserting call arguments:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mock</span> <span class="kn">import</span> <span class="n">Mock</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;donkey&quot;</span><span class="p">)</span>
<span class="go">&lt;Mock name=&#39;mock()&#39; id=&#39;...&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span><span class="n">AnyOf</span><span class="p">(</span><span class="s">&#39;monkey&#39;</span><span class="p">,</span> <span class="s">&#39;donkey&#39;</span><span class="p">,</span> <span class="s">&#39;badger&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mock</span><span class="p">(</span><span class="s">&quot;monkey&quot;</span><span class="p">)</span>
<span class="go">&lt;Mock name=&#39;mock()&#39; id=&#39;...&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">mock</span><span class="o">.</span><span class="n">call_args_list</span> <span class="o">==</span> <span class="p">[</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;donkey&quot;</span><span class="p">),</span>
<span class="gp">... </span>                               <span class="n">call</span><span class="p">(</span><span class="n">AnyOf</span><span class="p">(</span><span class="s">&#39;monkey&#39;</span><span class="p">,</span> <span class="s">&#39;donkey&#39;</span><span class="p">,</span> <span class="s">&#39;badger&#39;</span><span class="p">))]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to mockextras&#8217;s documentation!</a></li>
<li><a class="reference internal" href="#module-mockextras._fluent">DocStrings</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">mockextras 0.0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Andrew Burrows.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b3.
    </div>
  </body>
</html>